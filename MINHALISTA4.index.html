<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Agenda Executiva - Lista de Atividades</title>
<style>
  :root {
    --dark-blue-marfim: #283347;
    --dark-blue-marfim-alt: #1f2937;
    --accent-color: #a8b5c7;
    --background-color: #1b2330;
    --panel-bg: #252f43;
    --font-sans: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  html, body {
    height: 100%;
    margin: 0;
    background: var(--background-color);
    font-family: var(--font-sans);
    color: var(--accent-color);
    user-select: none;
    font-size: 14px;
  }

  .wrap {
    max-width: 960px;
    margin: 30px auto;
    display: flex;
    gap: 30px;
    padding: 0 16px;
    align-items: flex-start;
  }

  /* LIST SECTION */
  .sheet {
    flex: 1 1 600px;
    background: var(--panel-bg);
    border-radius: 0;
    padding: 24px 24px 32px 24px;
    border: 1px solid #3a445e;
    box-shadow: 0 6px 12px rgb(0 0 0 / 0.45);
  }

  header {
    margin-bottom: 16px;
  }

  #titleInput {
    font-size: 22px;
    font-weight: 700;
    border: none;
    border-bottom: 2px solid transparent;
    padding: 6px 0;
    width: 100%;
    color: var(--accent-color);
    font-family: var(--font-sans);
    outline-offset: 2px;
    outline: none;
    letter-spacing: 0.05em;
    background: transparent;
    transition: border-color 0.3s ease;
    cursor: text;
    text-transform: uppercase;
    border-radius: 0;
  }

  #titleInput::placeholder {
    color: #5a667d;
    font-weight: 600;
  }

  #titleInput:focus {
    border-color: var(--accent-color);
  }

  /* TASK LIST */
  #taskList {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #taskList li {
    font-size: 14px;
    font-weight: 500;
    line-height: 1.2;
    padding: 12px 16px;
    margin-bottom: 10px;
    border-radius: 0;
    border: 1px solid #3a445e;
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: var(--accent-color);
    background: var(--dark-blue-marfim-alt);
    cursor: pointer;
    transition: background-color 0.25s ease, color 0.3s ease;
    user-select: text;
    letter-spacing: 0.02em;
  }

  #taskList li:hover {
    background-color: #3a445e;
  }

  #taskList li.completed {
    color: #7f8ea4;
    background-color: #1b2330;
    text-decoration: line-through;
    cursor: default;
  }

  #taskList li.completed:hover {
    background-color: #1b2330;
  }

  /* DELETE BUTTON */
  .delete-btn {
    background: transparent;
    border: none;
    font-size: 18px;
    line-height: 1;
    color: #d9534f;
    cursor: pointer;
    user-select: none;
    padding: 0 4px;
    transition: color 0.25s ease;
    font-weight: 700;
    font-family: monospace;
    border-radius: 0;
  }

  .delete-btn:hover {
    color: #b3403a;
  }

  /* PANEL */
  aside.panel {
    width: 280px;
    background: var(--panel-bg);
    border-radius: 0;
    padding: 20px 18px;
    box-shadow: 0 5px 12px rgb(0 0 0 / 0.5);
    border: 1px solid #3a445e;
    display: flex;
    flex-direction: column;
    gap: 12px;
    color: var(--accent-color);
  }

  aside.panel h2 {
    margin: 0;
    font-weight: 700;
    font-size: 18px;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--accent-color);
  }

  #taskInput {
    font-size: 13px;
    padding: 8px 12px;
    border-radius: 0;
    border: 1px solid #3a445e;
    outline-offset: 2px;
    outline: none;
    font-family: var(--font-sans);
    color: var(--accent-color);
    background: var(--dark-blue-marfim-alt);
    transition: border-color 0.3s ease;
  }

  #taskInput::placeholder {
    color: #5a667d;
  }

  #taskInput:focus {
    border-color: var(--accent-color);
    background: #374559;
  }

  button#addBtn, button#clearBtn {
    font-weight: 700;
    font-size: 13px;
    padding: 6px 12px;
    border-radius: 0;
    border: none;
    cursor: pointer;
    font-family: var(--font-sans);
    transition: background-color 0.3s ease;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    user-select: none;
    box-shadow: none;
  }

  button#addBtn {
    background-color: #4a5d91;
    color: #d2d8e6;
    box-shadow: none;
  }
  button#addBtn:hover {
    background-color: #6a7bbf;
  }

  button#clearBtn {
    background-color: #c24a4a;
    color: #f8d7da;
    box-shadow: none;
  }
  button#clearBtn:hover {
    background-color: #e35757;
  }

  /* Placar com giro para números */
  .scoreboard {
    margin-top: 20px;
    display: flex;
    gap: 30px;
    justify-content: center;
  }

  .score {
    background: #374559;
    padding: 16px 30px;
    border-radius: 0;
    font-weight: 900;
    font-size: 34px;
    letter-spacing: 0.12em;
    width: 90px;
    text-align: center;
    color: var(--accent-color);
    font-family: 'Courier New', Courier, monospace;
    perspective: 600px;
  }

  .score.animate {
    animation: flip 0.6s ease forwards;
  }

  @keyframes flip {
    0% {
      transform: rotateX(0deg);
      opacity: 1;
    }
    50% {
      transform: rotateX(90deg);
      opacity: 0;
    }
    100% {
      transform: rotateX(0deg);
      opacity: 1;
    }
  }

  /* Accessibility focus */
  #taskList li:focus {
    outline: 3px solid #6a7bbf;
    outline-offset: 3px;
  }

  #titleInput:focus-visible {
    outline: 3px solid #6a7bbf;
  }

  #taskInput:focus-visible {
    outline: 3px solid #6a7bbf;
  }

  /* Responsive */
  @media (max-width: 800px) {
    .wrap {
      flex-direction: column;
      max-width: 100%;
      margin: 20px auto;
    }
    aside.panel {
      width: 100%;
      padding: 16px 14px;
      order: 2;
    }
    .sheet {
      width: 100%;
      padding: 20px 18px 28px 18px;
      margin-bottom: 24px;
    }
    .scoreboard {
      justify-content: flex-start;
      gap: 20px;
      margin-top: 12px;
    }
  }
</style>
</head>
<body>

<div class="wrap" role="main">
  <section class="sheet" aria-label="Lista de atividades executiva">

    <header>
      <input id="titleInput" type="text" aria-label="Título da lista editável" maxlength="40" placeholder="Lista de atividades" autocomplete="off" />
    </header>

    <ul id="taskList" aria-live="polite" aria-relevant="additions removals"></ul>

    <div class="scoreboard" aria-label="Placar de tarefas">
      <div class="score" id="totalScore" aria-live="polite" aria-atomic="true" aria-label="Total de tarefas">0</div>
      <div class="score" id="doneScore" aria-live="polite" aria-atomic="true" aria-label="Tarefas concluídas">0</div>
    </div>

  </section>

  <aside class="panel" aria-label="Painel para adicionar tarefas">
    <h2>Adicionar tarefa</h2>
    <input id="taskInput" type="text" aria-label="Digite uma nova tarefa" placeholder="Ex.: Revisar relatório trimestral" autocomplete="off" />
    <div style="display:flex; gap:12px; justify-content:flex-start;">
      <button id="addBtn" aria-label="Adicionar tarefa">Adicionar</button>
      <button id="clearBtn" aria-label="Limpar todas as tarefas">Limpar</button>
    </div>
  </aside>
</div>

<script>
  const STORAGE_KEY = 'agenda_ceo_tasks_dark_v2';
  const TITLE_KEY = 'agenda_ceo_title_dark_v2';

  const titleInput = document.getElementById('titleInput');
  const taskInput = document.getElementById('taskInput');
  const addBtn = document.getElementById('addBtn');
  const clearBtn = document.getElementById('clearBtn');
  const taskList = document.getElementById('taskList');
  const totalScore = document.getElementById('totalScore');
  const doneScore = document.getElementById('doneScore');

  let tasks = [];

  function saveTasks() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
  }

  function loadTasks() {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      try {
        tasks = JSON.parse(saved);
        if (!Array.isArray(tasks)) tasks = [];
      } catch {
        tasks = [];
      }
    }
  }

  function saveTitle() {
    const val = titleInput.value.trim();
    if(val) {
      localStorage.setItem(TITLE_KEY, val);
    } else {
      localStorage.removeItem(TITLE_KEY);
    }
  }
  function loadTitle() {
    const val = localStorage.getItem(TITLE_KEY);
    if(val) titleInput.value = val;
    else titleInput.value = '';
  }

  function renderTasks() {
    taskList.innerHTML = '';
    let doneCount = 0;

    tasks.forEach((task, i) => {
      const li = document.createElement('li');
      // Enumerar tarefa
      li.textContent = `${i+1}. ${task.text}`;
      li.tabIndex = 0;
      li.setAttribute('role', 'button');
      li.setAttribute('aria-pressed', task.done ? 'true' : 'false');
      if(task.done) {
        li.classList.add('completed');
        doneCount++;
      }

      li.addEventListener('click', () => toggleTask(i));
      li.addEventListener('keypress', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleTask(i);
        }
      });

      // Delete button
      const delBtn = document.createElement('button');
      delBtn.textContent = '×';
      delBtn.className = 'delete-btn';
      delBtn.setAttribute('aria-label', `Excluir tarefa: ${task.text}`);
      delBtn.addEventListener('click', e => {
        e.stopPropagation();
        deleteTask(i);
      });

      li.appendChild(delBtn);
      taskList.appendChild(li);
    });

    updateScoreboard(tasks.length, doneCount);
    saveTasks();
  }

  // Animation for scoreboard flip
  function animateScoreFlip(element, newValue) {
    if (element.textContent == newValue.toString()) return;

    element.classList.add('animate');
    setTimeout(() => {
      element.textContent = newValue;
    }, 300);
    setTimeout(() => {
      element.classList.remove('animate');
    }, 600);
  }

  function updateScoreboard(total, done) {
    animateScoreFlip(totalScore, total);
    animateScoreFlip(doneScore, done);
  }

  function toggleTask(index) {
    tasks[index].done = !tasks[index].done;
    if(tasks[index].done) playPencilSound();
    renderTasks();
  }

  function deleteTask(index) {
    tasks.splice(index, 1);
    renderTasks();
  }

  function addTask() {
    let val = taskInput.value.trim();
    if(val.length < 2) return;

    val = val.toLowerCase();
    val = val.charAt(0).toUpperCase() + val.slice(1);

    tasks.push({ text: val, done: false });
    taskInput.value = '';
    renderTasks();
    taskInput.focus();
  }

  function clearAll() {
    if(confirm('Deseja realmente limpar todas as tarefas?')) {
      tasks = [];
      renderTasks();
    }
  }

  // Pencil sound
  const pencilSound = new Audio('https://actions.google.com/sounds/v1/foley/pencil_scribble_03.ogg');
  pencilSound.volume = 1;
  function playPencilSound() {
    pencilSound.currentTime = 0;
    pencilSound.play();
  }

  // Init
  function init() {
    loadTitle();
    loadTasks();
    renderTasks();

    addBtn.addEventListener('click', addTask);
    clearBtn.addEventListener('click', clearAll);
    taskInput.addEventListener('keypress', e => { if(e.key === 'Enter') addTask(); });
    titleInput.addEventListener('input', saveTitle);
  }

  init();
</script>

</body>
</html>
